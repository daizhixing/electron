From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: John Kleinschmidt <kleinschmidtorama@gmail.com>
Date: Mon, 23 Sep 2019 17:07:53 -0400
Subject: add zoom limit setters to webcontents

Allows minimum_zoom_percent_ and maximum_zoom_percent_ to be set on WebContents.
This is needed by Electron to allow apps to limit how much an app can zoom in
or out.

diff --git a/content/browser/web_contents/web_contents_impl.cc b/content/browser/web_contents/web_contents_impl.cc
index 78c1fc12f1a40402454ced93f79d8c270e37a3dc..dd208db5c2b9f7cecd63fbd9d2c738906106e367 100644
--- a/content/browser/web_contents/web_contents_impl.cc
+++ b/content/browser/web_contents/web_contents_impl.cc
@@ -4175,10 +4175,18 @@ bool WebContentsImpl::GetClosedByUserGesture() {
   return closed_by_user_gesture_;
 }
 
+void WebContentsImpl::SetMinimumZoomPercent(int zoom_percent) {
+  minimum_zoom_percent_ = zoom_percent;
+}
+
 int WebContentsImpl::GetMinimumZoomPercent() {
   return minimum_zoom_percent_;
 }
 
+void WebContentsImpl::SetMaximumZoomPercent(int zoom_percent) {
+  maximum_zoom_percent_ = zoom_percent;
+}
+
 int WebContentsImpl::GetMaximumZoomPercent() {
   return maximum_zoom_percent_;
 }
diff --git a/content/browser/web_contents/web_contents_impl.h b/content/browser/web_contents/web_contents_impl.h
index 82d41c05443ad5ff03dd6be39dbb219e220f3a3d..42cf1887c07e5277370c90941127362fa779fdca 100644
--- a/content/browser/web_contents/web_contents_impl.h
+++ b/content/browser/web_contents/web_contents_impl.h
@@ -456,7 +456,9 @@ class CONTENT_EXPORT WebContentsImpl : public WebContents,
   void SystemDragEnded(RenderWidgetHost* source_rwh) override;
   void SetClosedByUserGesture(bool value) override;
   bool GetClosedByUserGesture() override;
+  void SetMinimumZoomPercent(int zoom_percent) override;
   int GetMinimumZoomPercent() override;
+  void SetMaximumZoomPercent(int zoom_percent) override;
   int GetMaximumZoomPercent() override;
   void SetPageScale(float page_scale_factor) override;
   gfx::Size GetPreferredSize() override;
@@ -1724,8 +1726,8 @@ class CONTENT_EXPORT WebContentsImpl : public WebContents,
   bool closed_by_user_gesture_;
 
   // Minimum/maximum zoom percent.
-  const int minimum_zoom_percent_;
-  const int maximum_zoom_percent_;
+  int minimum_zoom_percent_;
+  int maximum_zoom_percent_;
 
   // Used to correctly handle integer zooming through a smooth scroll device.
   float zoom_scroll_remainder_;
diff --git a/content/public/browser/web_contents.h b/content/public/browser/web_contents.h
index 5e7a443877b3e81f269fc80ab2835e9778f2de53..3ac4374212b585524cd903202d064775c5c0177c 100644
--- a/content/public/browser/web_contents.h
+++ b/content/public/browser/web_contents.h
@@ -839,8 +839,10 @@ class WebContents : public PageNavigator,
   virtual void SetClosedByUserGesture(bool value) = 0;
   virtual bool GetClosedByUserGesture() = 0;
 
-  // Gets the minimum/maximum zoom percent.
+  // Gets/sets the minimum/maximum zoom percent.
+  virtual void SetMinimumZoomPercent(int zoom_percent) = 0;
   virtual int GetMinimumZoomPercent() = 0;
+  virtual void SetMaximumZoomPercent(int zoom_percent) = 0;
   virtual int GetMaximumZoomPercent() = 0;
 
   // Set the renderer's page scale to the given factor.
